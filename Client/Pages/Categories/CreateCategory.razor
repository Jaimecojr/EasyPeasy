@page "/categories/create"
@using peliculas.Client.Pages.Components
@inject IServiceMovie movie
@inject IErrorMessage showMessage
@inject NavigationManager navigationManager

<FormCategory OnValidSubmit= "Create" Category = "Category" ></FormCategory>

@code {
    private Category Category = new Category();
    
    private async Task Create(){
        var httpResponse = await movie.Post("api/categories", Category);
        if(httpResponse.Error){
            var body = await httpResponse.GetBody();
            await showMessage.ShowErrorMessage(body);
        }else{
            navigationManager.NavigateTo("/categories");
        }        
        Console.WriteLine($"Nombre de la Categoria: {Category.NameCategory}");
    }
}